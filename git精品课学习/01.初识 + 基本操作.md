>版本控制器 :管理系统 -- 记录每次修改和版本迭代
>git
>管理源代码


文本文件
二进制文件

# 基本操作
## 初始化仓库和配置仓库
**初始化仓库**
![[Pasted image 20251012193438.png]]
* init之后,会创建一个本地的git仓库, 是一个隐藏文件 `.git`
* 注 : 我们常说的 本地仓库不是你自己创建的目录(非gitcode),而是通过git init创建的隐藏目录(`.git)


**配置本地仓库**
```shell
git config -l  # 查看本地仓库配置项
git config --unset user.name   # 删除配置项中key=user.name
git config --global user.name "mylvzi"     # 设置全局的username
git config --global --unset user.name     # 删除全局的username
```
* global : 一台服务器上会有多个本地的git仓库(.git文件夹), global可以自动识别并自动配置

**添加文件**

# git区域
本地仓库  是 .git  版本库
不允许直接在.git下手动修改文件  
对象库  objects  每次add都会创建一个git对象   存放的是git的索引
![[Pasted image 20251012193212.png]]
* 在工作区创建的文件是不会被git管理的,只有通过add 和 commit 之后,才会 被 git管理*
![[Pasted image 20251012201706.png]]
![[Pasted image 20251012201642.png]]

* Git追踪的本质 : 追踪的是**文件的修改**, 而不是追踪文件; git add 之后会创建一个 blob对象,打印这个对象会打印出变化的内容

# 命令
`git status` : 查看工作区和暂存区的状态情况, 看是否存在变化或者未提交的文件

`git diff xxx` : 比较工作区和暂存区的文件差异
![[Pasted image 20251013224937.png]]
* git diff HEAD : 比较当前工作区和最近一次提交的全部改动  工作区和本地仓库之间的差异
* git diff commit1 commit2 : 比较两次提交的差异
* git diff 后面添加文件  比较的是此文件 工作区和暂存区之间内容的差异
* git diff commit : 比较工作区与指定提交之间的差异
* HEAD : 本质上是一个指针  指向最近一次提交
# 版本回退
>git reset --soft --mixed --hard commitId
>回退的本质是更改版本库
>--soft : 只更改版本库
>--mixed : 版本库和暂存区都修改  默认
>--hard : 版本库,暂存区,工作区都会修改  慎用
>git reset head : 回退到当前提交
>git reset --hard HEAD^ 回退到上一次提交  

git reflog : 很重要的一个命令  记录你使用git的所有操作   可以吃后悔药!!!
比如不小心 git reset --hard xxx了,导致本地工作区的代码全部没有了  就可以使用 `git reflog查找到对应的commitid`, 再次执行 git reset


**为什么版本回退这么快呢**
>本质上是因为更改的是指向

![[Pasted image 20251013231328.png]]
* 修改的是指向的blob对象

# 撤销修改
>类似于ctrl z, 执行撤销操作
>git中的撤销是要区分区域的 
>工作区撤销 : git checkout -- file
>工作区 和 暂存区撤销 : git reset --hard HEAD 回退到当前提交

![[Pasted image 20251014094632.png]]


**情况一 : 工作区修改, 还没有add, 需要回退到修改之前**
![[Pasted image 20251218174705.png]]

**直接使用git checkout -- demo.txt进行工作区内容回退**
![[Pasted image 20251218174849.png]]


**情况二 : 已经add, 但是还没有commit**
>只撤销暂存区中的内容, 撤回一次add(工作区内容保持不变)

![[Pasted image 20251218175313.png]]
* 如果工作区的内容也想回退, 直接git checkout -- demo1.txt

**情况三 : add, commit 如何撤销**
![[Pasted image 20251218175519.png]]
* HEAD^ : 表示当前提交的父提交


# Git删除文件
>删除文件 -- 三个区域都要进行删除
>git的设计哲学是每次变动都要进行记录, 所以删除文件也必须进行记录!!!!

`方法一:`
```shell
rm file1
git add file1  # 将变动同步到暂存区
git commit -m "delete file1"  # 将暂存区中的变动同步到本地仓库
```

`方法二:`
```shell
git rm file1  # == rm file1 + git add file1
git commit -m "delete file1"
```