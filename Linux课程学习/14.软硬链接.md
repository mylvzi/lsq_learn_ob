# 1,见识一下软硬链接
`ln -s file.txt file_soft.link`  创建软链接
`ln file.txt file_soft.link`  创建硬链接
![[Pasted image 20251201225640.png]]
* 软链接本身是一个独立的文件, 文件 = 内容 + 属性, 软链接是一个特殊的文件, 叫做**symblink**, 内容是**目标文件的路径字符串**, 类似windows中的快捷方式
* 硬链接不是一个独立文件, 因为没有独立的inode_number, 所以硬链接就是**在指定目录下新建一个文件名和inode映射关系**, 没有新建文件  删除硬链接, 并不会删除文件, 只是删除一个映射关系
* 就像我们上面说的, 只需要找到inode就能找到文件, 有很多文件名都想找到你这个inode
![[Pasted image 20251203093824.png]]
* 在使用cat打印时, 会调用 open , 内核会发现打开的文件是一个**symblink**, 就会沿着这个路径, 去读取目标文件中的内容,然后输出到显示器文件
* 硬链接计数也叫做文件的磁盘级引用计数


**定位一个文件的方式**
1. 通过路径  软链接  存储目标文件的路径
2. 直接找到文件的inode  硬链接  建立文件名和inode的映射关系

这两种方式,最后都是通过inode号来定位文件的, 只不过寻找inode的路径不同


软硬链接的区别
*删除源文件之后的差异*

硬链接
```
rm -rf original
cat hardlink
```
仍然可用, 因为文件级的磁盘引用计数不是0, 数据仍然存在
![[Pasted image 20251203143228.png]]
软链接
```
rm -rf original
cat sotflink
```
不可用!  原文件删除, 路径失效
![[Pasted image 20251203143258.png]]

## 软链接的作用
文件的快捷方式

## 硬链接的作用
![[Pasted image 20251203163553.png]]

* 任何一个目录, 刚开始新建的时候, 引用计数一定是2
* 一个目录的引用计数, 最少就是2
* 目录的引用计数 - 2 就是当前目录下子目录的数量

**总结**
1. 构建Linux的路径结构, 让我们可以使用 `.``..`来进行路径定位
2. 进行文件备份  即使删除源文件, 引用计数不为0, 数据仍然不会被删除



>1. 打开的文件 -- 内核  内存  struct file + 内核级缓冲区
>2. 没有被打开的文件  -- 磁盘, 文件系统  格式化就是新建一个文件系统
>文件写入, 二进制写入  -- 站在计算机的角度, 都是二进制的写入, 所谓的文本写入只是语言层的概念
>先把二进制的输入读取到用户级别的缓冲区之中, 然后再进行语言级别的翻译 -- 序列化和反序列化 这是语言级别的翻译操作