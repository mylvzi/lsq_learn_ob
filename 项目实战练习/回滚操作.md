```
# 现在给你一个工程级思考题（必须思考）

如果：

`订单表插入成功 订单项第 3 条插入失败`

数据库事务是怎么保证回滚的？

- 是 Java 回滚？
    
- 还是 MySQL 回滚？
    
- Spring 在中间做了什么？
```
* 真正执行回滚的事mysql的rollback
* spring控制事务边界
* Java只是抛异常

通过@Transcational注解:
1. 方法执行前会启动事务监察机制
2. 一旦出现runntimeexception, spirng会让jdbc rollback -->mysql根据 undolog执行rollback
3. 如果成功, 直接commit
```