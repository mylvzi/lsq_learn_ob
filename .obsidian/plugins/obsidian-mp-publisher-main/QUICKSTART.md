# 快速开始指南

## 🚀 5分钟上手 MP Publisher

### 第一步：安装插件

#### 方法一：手动安装（推荐用于测试）
1. 将整个 `mp-publisher` 文件夹复制到你的 Obsidian vault 的 `.obsidian/plugins/` 目录下
2. 重启 Obsidian
3. 打开设置 > 第三方插件
4. 找到 "MP Publisher" 并启用

#### 方法二：从源代码构建
```bash
cd mp-publisher
npm install
npm run build
```

### 第二步：配置微信公众号 API

1. **获取 API 凭证**
   - 登录 [微信公众平台](https://mp.weixin.qq.com/)
   - 进入"开发" > "基本配置"
   - 记录你的 `AppID` 和 `AppSecret`

2. **在插件中配置**
   - 打开 Obsidian 设置
   - 找到 "MP Publisher" 设置
   - 在"微信公众号配置"部分填入：
     - AppID
     - AppSecret
   - 可选：配置图片存储位置（默认：`[文档名]__assets`）

### 第三步：开始使用

#### 预览功能
1. **打开预览窗口**
   - 点击左侧栏的发送图标 📤
   - 或按 Ctrl+P 打开命令面板，输入"打开公众号发布插件"

2. **选择样式**
   - 在预览窗口顶部选择主题模板
   - 调整字体和字号
   - 实时查看效果

3. **复制到公众号**
   - 点击"复制到公众号"按钮
   - 打开微信公众号编辑器
   - 粘贴（Ctrl+V 或 Cmd+V）

#### 发布功能
1. **准备发布**
   - 确保已配置微信公众号 API
   - 编辑好你的文章内容

2. **发布文章**
   - 点击预览窗口的"发布"按钮
   - 或使用命令"发布到微信公众号"
   - 输入标题
   - 选择或上传封面图
   - 点击"发布"

3. **查看结果**
   - 登录微信公众平台
   - 进入"素材管理" > "草稿箱"
   - 找到刚发布的草稿

## 📋 常用功能速查

### 键盘快捷键
- `Ctrl+P` (或 `Cmd+P`) - 打开命令面板
- 搜索 "mp" 可快速找到插件命令

### 预览窗口控件
- 🔓 **锁定按钮** - 开启/关闭实时预览
- **模板选择器** - 切换不同主题
- **字体选择器** - 更换字体
- **± 按钮** - 调整字号
- **复制按钮** - 复制格式化内容
- **发布按钮** - 一键发布到微信

### 设置选项
- **模板管理** - 创建和编辑自定义主题
- **背景管理** - 添加自定义背景图
- **字体管理** - 添加自定义字体
- **微信配置** - 设置 API 凭证
- **调试模式** - 开启详细日志

## 💡 使用技巧

### 1. 图片管理
- 图片会自动存储在 `[文档名]__assets` 文件夹
- 发布时会自动上传到微信服务器
- 已上传的图片会缓存，避免重复上传

### 2. 样式自定义
- 可以基于现有模板创建新模板
- 支持完全自定义 CSS 样式
- 使用"预览"功能查看效果后再保存

### 3. 草稿更新
- 再次发布同一文档会自动更新草稿
- 元数据保存在 `[文档名]__assets/metadata.json`
- 删除该文件可以创建新草稿

### 4. 批量发布
- 可以为多个文档分别配置不同的样式
- 使用命令面板快速切换文档并发布

## 🔧 故障排除

### 问题：无法连接微信 API
**解决方案：**
- 检查 AppID 和 AppSecret 是否正确
- 确保网络连接正常
- 查看 Obsidian 开发者工具的控制台日志

### 问题：图片上传失败
**解决方案：**
- 确保图片格式为 JPG 或 PNG
- 图片大小不要超过 2MB
- 检查图片路径是否正确

### 问题：样式在公众号编辑器中显示不正确
**解决方案：**
- 使用"复制到公众号"功能而不是直接粘贴
- 某些复杂样式可能被微信编辑器过滤，尝试简化样式

### 问题：插件无法加载
**解决方案：**
- 确保 `main.js`、`manifest.json`、`styles.css` 都在插件目录
- 检查 Obsidian 版本是否 >= 0.15.0
- 查看开发者工具的控制台错误信息

## 📚 进阶功能

### 创建自定义模板
1. 打开设置 > MP Publisher > 模板管理
2. 点击"+ 新建模板"
3. 配置各种元素的样式：
   - 标题样式（H1-H6）
   - 段落样式
   - 列表样式
   - 代码块样式
   - 引用块样式
   - 链接样式
4. 点击"预览"查看效果
5. 保存模板

### 添加自定义字体
1. 打开设置 > MP Publisher > 字体管理
2. 点击"+ 新建字体"
3. 输入字体名称和 CSS font-family 值
4. 保存后即可在预览窗口选择

### 使用背景图
1. 打开设置 > MP Publisher > 背景管理
2. 点击"+ 新建背景"
3. 上传图片或输入图片 URL
4. 在预览窗口选择背景

## 🎓 最佳实践

### 1. 内容编写
- 使用标准 Markdown 语法
- 合理使用标题层级
- 图片使用描述性文件名
- 保持段落简洁

### 2. 样式选择
- 根据内容类型选择合适的模板
- 技术文章推荐"Dark"或"Minimal"主题
- 文学内容推荐"Elegant"主题

### 3. 发布流程
- 先在预览窗口检查样式
- 确认无误后再发布
- 发布后在微信平台进行最后检查

### 4. 图片优化
- 发布前压缩图片以减小大小
- 使用适当的图片尺寸
- 避免使用过多图片

## 📞 获取帮助

- **GitHub Issues**: 报告 Bug 或提出功能建议
- **文档**: 查看 README.md 获取详细文档
- **开发者工具**: 按 F12 打开控制台查看日志

---

**祝你使用愉快！如果遇到问题，欢迎提交 Issue。**
