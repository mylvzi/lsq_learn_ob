`prompt要素` = 目标(要干啥) + 上下文(依赖啥) + 输入(你来干吧)

目标决定了prompt的提问框架
* 目标(推断,交流,交换,变更,etc) + 额外的补充

具体的技巧(套路)
* 角色:明确特征映射关系, 人工去创造对齐,包含三个方面:擅长领域,行为特色,做事原则
* 围栏:明确应该做和不应该做,positive prompt negative prompt,明确范围
* 占位符（<>）：指代中间被替换的文本，研发视角即“模板的变量声明”
* 界定符: 界定要处理的内容, 通过界定符可以避免`prompt injection` 
* 示例:就是在prompt中添加一些example,类似于deeplearning中的监督学习,即提供一些已有的样本进行训练,对于大模型来说也是一样的,通过这些例子可以帮助训练输出
* COT(chain of thought):思维链,手把手教授大模型如何完成输出,提供一整套的思维链供大模型训练,输出内容
![[Pasted image 20250731143449.png]]


# prompt的本质
![[Pasted image 20250731152757.png]]

* 本质是一个桥梁,用于链接低纬的现实世界和高维的模型世界,prompt写的越巧妙,越好,链接的内容越多,生成的内容越符合我们的需求
* 从技术角度来说,prompt的本质是在**引导transformer激活特定的关系网络**

> 为什么prompt有效呢?底层上可以从以下三个方面回答

**模型角度**
transformer本质上是一个**巨大的模式识别系统**,通过预训练建立了多个模式,不同的模式对应着不同的行为,而prompt本质上是**模式的激活开关**,prompt设计的越好,激活的模式越多,输出结果越准确

**Attention角度**
transformer的核心是**Self Attenetion**,每个token会注意其他的token,每个token都有自己的**权重**,根据权重流向不同的信息,而prompt本质上是**重构了整个句子的Attention权重结构**

如果你指定角色"医生",那么医生的权重就会大大增加,产生的输出内容可能更加专业

**关系网络角度**
prompt是关系图谱的种子节点,根据这个种子节点扩展出整个语义网络

![[Pasted image 20250804214701.png]



# 业务中的prompt

## prompt有哪些种类
![[Pasted image 20250811115328.png]]

**从位置上**
* prefix:定义的全局prompt,奠定ai的性格,回答语气
* Suffix:处于末尾,一般用于规约模型的输出格式,风格等等(比如ai生图肯定是要求以图片的形式输出)
* infix:用于处理的子任务,对应于**user prompt**

**作用域**
* Global:全局prompt,对应system prompt
* Local:局部的prompt  对应user prompt
**用途上**
* System setting
* user setting
* user prompt

user setting是在System setting的基础上,给用户提供了一些更加灵活,更加自定义的场景

System prompt:道
User prompt:术

## 哪些场景下用到了prompt
#### 1.微调场景
SFT(Supervised Fine Tunning)监督微调,是指在一个**已经预训练好**的模型基础上,通过人工标注的数据,对模型进行二次训练,使其在特定领域/特定任务上表现的更棒

在进行SFT之前,模型已经被训练过了,内部是一个庞大的知识库,但是**太普遍**,没有针对性,所以需要**微调**,使其在特定领域表现的更好

那么如何实现**在特定领域表现更好**这个操作呢?通过prompt进行多轮训练,所以**prompt是链接知识与输出的桥梁**

#### 2.RAG场景
![[Pasted image 20250811130338.png]]

* prompt是merge外部知识与模型的胶水

**RAG** 是 Retrieval-Augmented Generation 的缩写，翻译过来就是**检索增强生成**。

它是一种把“检索（Retriever）”和“生成（Generator）”结合起来的技术，核心思想是：

> **先从外部知识库中检索出与问题相关的内容，再利用大模型基于这些内容进行更准确、更丰富的文本生成。**



使用prompt完成更加具体的调优,实现更加自定义话的模型输出

在RAG场景中作为merger外部知识的胶水
